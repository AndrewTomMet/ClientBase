language: php
sudo: required
php:

  - 5.6

services:

  - mysql

before_install:
  - composer self-update

install:
  - composer install

before_script:
  - cp app/config/parameters.yml.dist app/config/parameters.yml
  - php bin/console doctrine:database:create --env=test
  - php bin/console doctrine:schema:create --env=test
#  - php bin/console doctrine:fixtures:load --env=test
  - php bin/console cache:warmup --env=test

script: phpunit -c app/

#script: phpunit Test.php

# env:
#    - SYMFONY_VERSION=3.1.*
#    - SYMFONY_VERSION=dev-master

#  before_script:
#    - composer require symfony/http-foundation:${SYMFONY_VERSION}

#  script: phpunit --coverage-text